<!DOCTYPE html>
<html>
<head>
    <script>
        // Function to add a new row with user data to the "Today's Shopping" table
        function addToShoppingList() {
            var item = document.getElementById("list").value;
            var price = document.getElementById("price").value;

            if (item && price) {
                var table = document.getElementById("shoppingTable");
                var row = table.insertRow(-1);
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                cell1.innerHTML = item;
                cell2.innerHTML = price;
            }
        }

        // Function to clear the "Today's Shopping" table
        function clearShoppingTable() {
            var table = document.getElementById("shoppingTable");
            while (table.rows.length > 1) {
                table.deleteRow(1);
            }
        }

        // Function to submit the data to Google Sheets
        function submitToGoogleSheet() {
    // Collect data from the "Today's Shopping" table
    var table = document.getElementById("shoppingTable");
    var rows = table.getElementsByTagName("tr");
    var data = [];

    // Start from index 1 to skip the header row
    for (var i = 1; i < rows.length; i++) {
        var cells = rows[i].getElementsByTagName("td");
        var item = cells[0].textContent;
        var price = cells[1].textContent;
        data.push({ item: item, price: price });
    }

    // Prepare the data for submission
    var requestData = {
        method: "get",
        body: JSON.stringify(data),
        headers: {
            "Content-Type": "application/json"
        }
    };

    // Replace this URL with your actual Google Sheets API endpoint
    var googleSheetsAPIEndpoint = "https://script.google.com/macros/s/AKfycbzohDpCvJfpJvBXtCmQQwioUbmN5SwbtHp1Wi6rS2tCNkgW8O_1iesQJP8DA7-o0zzCgQ/exec?gid=0";

    // Make the HTTP request to the Google Sheets API
    fetch(googleSheetsAPIEndpoint, requestData)
        .then(function (response) {
            if (response.ok) {
                alert("Data submitted successfully!");
                // Optionally, you can clear the table or take other actions here.
            } else {
                alert("Error submitting data.");
            }
        })
        .catch(function (error) {
            console.error("Error:", error);
        });
}


    </script>
</head>
<body>

<h2>HTML Forms</h2>

<form>
    <label for="list">Items:</label><br>
    <input type="text" id="list" name="list"><br>
    <label for="price">Price:</label><br>
    <input type="text" id="price" name="price"><br>
</form>

<table id="shoppingTable">
    <caption>Today's Shopping</caption>
    <tr>
        <th>Items</th>
        <th>Price</th>
    </tr>
    <!-- Rows for displaying shopping items will be added here dynamically -->
</table>

<button onclick="addToShoppingList()">Add to Shopping List</button>
<button onclick="clearShoppingTable()">Clear</button>
<button onclick="submitToGoogleSheet()">Submit to Google Sheet</button>

<p>If you click the "Add to Shopping List" button, the data will be added to the table above.
    When you're ready to submit, click the "Submit to Google Sheet" button to push the data to your Google Sheet.</p>

</body>
</html>
